{"ast":null,"code":"import { createReducer, on } from '@ngrx/store';\nimport { addItem, removeItem, clearCart } from './cart.actions';\nimport { initialCartState } from './cart.model';\nexport const cartReducer = createReducer(initialCartState, on(addItem, (state, {\n  item\n}) => {\n  const existingItem = state.items.find(i => i.id === item.id);\n  let updatedItems;\n  if (existingItem) {\n    updatedItems = state.items.map(i => i.id === item.id ? {\n      ...i,\n      quantity: i.quantity + item.quantity\n    } : i);\n  } else {\n    updatedItems = [...state.items, item];\n  }\n  const updatedTotalAmount = state.totalAmount + item.price * item.quantity;\n  return {\n    ...state,\n    items: updatedItems,\n    totalAmount: updatedTotalAmount\n  };\n}), on(removeItem, (state, {\n  itemId\n}) => {\n  const item = state.items.find(i => i.id === itemId);\n  if (!item) {\n    return state;\n  }\n  const updatedItems = state.items.filter(i => i.id !== itemId);\n  const updatedTotalAmount = state.totalAmount - item.price * item.quantity;\n  return {\n    ...state,\n    items: updatedItems,\n    totalAmount: updatedTotalAmount\n  };\n}), on(clearCart, state => ({\n  ...state,\n  items: [],\n  totalAmount: 0\n})));","map":{"version":3,"names":["createReducer","on","addItem","removeItem","clearCart","initialCartState","cartReducer","state","item","existingItem","items","find","i","id","updatedItems","map","quantity","updatedTotalAmount","totalAmount","price","itemId","filter"],"sources":["C:\\Users\\daniz\\Desktop\\Angular\\my-app\\src\\app\\cart\\cart.reducer.ts"],"sourcesContent":["import { createReducer, on } from '@ngrx/store';\r\nimport { addItem, removeItem, clearCart } from './cart.actions';\r\nimport { CartState, initialCartState } from './cart.model';\r\n\r\nexport const cartReducer = createReducer(\r\n  initialCartState,\r\n  on(addItem, (state, { item }) => {\r\n    const existingItem = state.items.find(i => i.id === item.id);\r\n\r\n    let updatedItems;\r\n\r\n    if (existingItem) {\r\n      updatedItems = state.items.map(i =>\r\n        i.id === item.id\r\n          ? { ...i, quantity: i.quantity + item.quantity }\r\n          : i\r\n      );\r\n    } else {\r\n      updatedItems = [...state.items, item];\r\n    }\r\n\r\n    const updatedTotalAmount = state.totalAmount + item.price * item.quantity;\r\n\r\n    return {\r\n      ...state,\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount\r\n    };\r\n  }),\r\n  on(removeItem, (state, { itemId }) => {\r\n    const item = state.items.find(i => i.id === itemId);\r\n\r\n    if (!item) {\r\n      return state;\r\n    }\r\n\r\n    const updatedItems = state.items.filter(i => i.id !== itemId);\r\n    const updatedTotalAmount = state.totalAmount - item.price * item.quantity;\r\n\r\n    return {\r\n      ...state,\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount\r\n    };\r\n  }),\r\n  on(clearCart, state => ({\r\n    ...state,\r\n    items: [],\r\n    totalAmount: 0\r\n  }))\r\n);\r\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,EAAE,QAAQ,aAAa;AAC/C,SAASC,OAAO,EAAEC,UAAU,EAAEC,SAAS,QAAQ,gBAAgB;AAC/D,SAAoBC,gBAAgB,QAAQ,cAAc;AAE1D,OAAO,MAAMC,WAAW,GAAGN,aAAa,CACtCK,gBAAgB,EAChBJ,EAAE,CAACC,OAAO,EAAE,CAACK,KAAK,EAAE;EAAEC;AAAI,CAAE,KAAI;EAC9B,MAAMC,YAAY,GAAGF,KAAK,CAACG,KAAK,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,IAAI,CAACK,EAAE,CAAC;EAE5D,IAAIC,YAAY;EAEhB,IAAIL,YAAY,EAAE;IAChBK,YAAY,GAAGP,KAAK,CAACG,KAAK,CAACK,GAAG,CAACH,CAAC,IAC9BA,CAAC,CAACC,EAAE,KAAKL,IAAI,CAACK,EAAE,GACZ;MAAE,GAAGD,CAAC;MAAEI,QAAQ,EAAEJ,CAAC,CAACI,QAAQ,GAAGR,IAAI,CAACQ;IAAQ,CAAE,GAC9CJ,CAAC,CACN;GACF,MAAM;IACLE,YAAY,GAAG,CAAC,GAAGP,KAAK,CAACG,KAAK,EAAEF,IAAI,CAAC;;EAGvC,MAAMS,kBAAkB,GAAGV,KAAK,CAACW,WAAW,GAAGV,IAAI,CAACW,KAAK,GAAGX,IAAI,CAACQ,QAAQ;EAEzE,OAAO;IACL,GAAGT,KAAK;IACRG,KAAK,EAAEI,YAAY;IACnBI,WAAW,EAAED;GACd;AACH,CAAC,CAAC,EACFhB,EAAE,CAACE,UAAU,EAAE,CAACI,KAAK,EAAE;EAAEa;AAAM,CAAE,KAAI;EACnC,MAAMZ,IAAI,GAAGD,KAAK,CAACG,KAAK,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKO,MAAM,CAAC;EAEnD,IAAI,CAACZ,IAAI,EAAE;IACT,OAAOD,KAAK;;EAGd,MAAMO,YAAY,GAAGP,KAAK,CAACG,KAAK,CAACW,MAAM,CAACT,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKO,MAAM,CAAC;EAC7D,MAAMH,kBAAkB,GAAGV,KAAK,CAACW,WAAW,GAAGV,IAAI,CAACW,KAAK,GAAGX,IAAI,CAACQ,QAAQ;EAEzE,OAAO;IACL,GAAGT,KAAK;IACRG,KAAK,EAAEI,YAAY;IACnBI,WAAW,EAAED;GACd;AACH,CAAC,CAAC,EACFhB,EAAE,CAACG,SAAS,EAAEG,KAAK,KAAK;EACtB,GAAGA,KAAK;EACRG,KAAK,EAAE,EAAE;EACTQ,WAAW,EAAE;CACd,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}